<%- include("../partials/admin/admin-header.ejs"); -%>

<div class="container-fluid">
    <div class="row">
        <%- include("../partials/admin/admin-navbar.ejs"); -%>

        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
            <div
                class="
                    d-flex
                    justify-content-between
                    flex-wrap flex-md-nowrap
                    align-items-center
                    pt-3
                    pb-2
                    mb-3
                    border-bottom
                "
            >
                <h1 class="h2">Panorama List</h1>
            </div>
            <%- include('../partials/utils/messages.ejs') %>
            <!--Table-->
            <div class="table-responsive mt-1 p-5">
                <table
                    class="
                        table
                        table-success
                        table-sm
                        table-striped
                        table-hover
                        table-bordered
                        border-secondary
                        caption-top
                        text-center
                    "
                >
                    <caption>
                        List of Panoramas
                    </caption>
                    <thead class="table-dark">
                        <tr>
                            <th scope="col">Title</th>
                            <th scope="col">Location</th>
                            <th scope="col">Modified By</th>
                            <th scope="col">Date Modified</th>
                            <th>Edit</th>
                            <th scope="col">Delete</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% for(let panorama of panoramas) { %>
                        <tr>
                            <td><%= panorama.title %></td>
                            <td><%= panorama.location %></td>
                            <td><%= panorama.author.name %></td>
                            <td><%= panorama.date %></td>
                            <td>
                                <a
                                    class="card-link btn btn-success"
                                    href="/panoramas/admin/<%= panorama._id %>/edit"
                                    ><i class="fas fa-edit"></i
                                ></a>
                            </td>
                            <!--* Delete Button  -->
                            <td>
                                <form
                                    class="d-inline"
                                    action="/panoramas/admin/list/:page"
                                    method="POST"
                                >
                                    <button
                                        class="btn btn-warning"
                                        name="deleteButton"
                                        value="<%= panorama._id %>"
                                        onclick="this.form.submit()"
                                    >
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </form>
                            </td>
                        </tr>
                        <% } %>
                    </tbody>
                </table>
                <!--Table-->
                <!--Pagination-->
                <div class="mt-3">
                    <% if (pages > 0) { %>
                    <ul class="pagination text-center">
                        <% if (current == 1) { %>
                        <li class="disabled">
                            <a class="page-link text-secondary">First</a>
                        </li>
                        <% } else { %>
                        <li>
                            <a
                                class="page-link text-secondary"
                                href="/panoramas/admin/list/1"
                                >First</a
                            >
                        </li>
                        <% } %> <% var i = (Number(current) > 5 ?
                        Number(current) - 4 : 1) %> <% if (i !== 1) { %>
                        <li class="disabled">
                            <a class="page-link text-secondary">...</a>
                        </li>
                        <% } %> <% for (; i <= (Number(current) + 4) && i <=
                        pages; i++) { %> <% if (i == current) { %>
                        <li class="active">
                            <a class="page-link text-secondary"><%= i %></a>
                        </li>
                        <% } else { %>
                        <li>
                            <a
                                class="page-link text-secondary"
                                href="/panoramas/admin/list/<%= i %>"
                                ><%= i %></a
                            >
                        </li>
                        <% } %> <% if (i == Number(current) + 4 && i < pages) {
                        %>
                        <li class="disabled">
                            <a class="page-link text-secondary">...</a>
                        </li>
                        <% } %> <% } %> <% if (current == pages) { %>
                        <li class="disabled">
                            <a class="page-link text-secondary">Last</a>
                        </li>
                        <% } else { %>
                        <li>
                            <a
                                class="page-link text-secondary"
                                href="/panoramas/admin/list/<%= pages %>"
                                >Last</a
                            >
                        </li>
                        <% } %>
                    </ul>
                    <% } %>
                </div>
                <!--Pagination-->
            </div>
        </main>
    </div>
</div>

<%-include("../partials/admin/admin-footer.ejs"); -%>
